# 밸런스 게임 현장 이벤트 기획안

## 📋 개요

42 경산 크리스마스 이벤트의 하이라이트로, **메신저 채팅방 스타일**의 실시간 밸런스 게임 배틀을 진행합니다.

### 핵심 콘셉트

- **채팅방 UI**: 카카오톡처럼 내 진영은 오른쪽, 상대 진영은 왼쪽 말풍선
- **실시간 대결**: 참가자가 입력한 의견이 즉시 TV 화면과 모바일에 표시
- **익명 + 추적**: 화면엔 익명, DB엔 42 intra_id 저장으로 안전성 확보
- **인터랙티브**: 6라운드 × 7분, 총 42분간 진행되는 열띤 토론 배틀

### 예상 효과

- 참가자 몰입도 극대화 (익숙한 메신저 UI)
- 실시간 소통으로 현장 분위기 활성화
- 42 경산 커뮤니티 결속력 강화
- 재미있는 통계 데이터 확보

## 📅 전체 일정

### 사전 설문조사

- **기간**: 12/10 (화) - 12/20 (금)
- **내용**: SurveyQuestions.md 문항 (1-25번)
  - 1-19번: 기본 정보, 학습 스타일, 목표 등
  - 20-25번: 밸런스 게임 (선택지만 A or B, 의견 없음)
- **참여 방법**: 온라인 설문 폼
- **독려**: 슬랙 공지, 추첨 이벤트

### 크리스마스 당일 이벤트 (12/24)

```
Part 1: 설문 결과 발표 (15분)
12:00-12:15
- 42 경산 카뎃 통계 공개
- 희망 분야, 활동 시간대, MBTI 등
- 가장 힘들었던 과제 TOP 3
- 밸런스 게임 사전 결과 미리보기

Part 2: 밸런스 게임 배틀 (42분)
12:15-12:57
- 총 6라운드, 각 7분씩 진행
- 사전 설문 비율 먼저 공개: "팥붕어빵 52% vs 슈크림 48%"
- 참가자가 진영 선택 후 의견 입력
- TV 화면에 메신저 채팅방처럼 실시간 표시
- 라운드마다 어드민이 시작/종료 제어
```

## 🎮 이벤트 방식: 시간대별 순차 진행 (배틀 로얄)

### 참가 방식: 고정 QR/링크 + 어드민 라운드 제어

#### 참가자 플로우

1. **이벤트 시작 전**: QR 코드 스캔 또는 링크 접속 (survey.42gs.com)
2. **42 인증 로그인**: 42 OAuth로 로그인 (intra_id 저장)
3. **대기 화면**: "곧 시작됩니다" 메시지 표시
4. **라운드 시작**: 어드민이 라운드 시작 버튼 클릭 시 모든 참가자 화면 자동 전환
5. **진영 선택 + 의견 입력**: 7분간 참여 (화면에는 익명 "괄호파 👤"로 표시)
6. **다음 라운드**: 어드민이 다음 라운드 시작 시 자동 전환 (새로 접속 불필요)

#### 어드민 제어

- **라운드 시작**: "Round N 시작" 버튼 클릭 → 모든 참가자 화면 전환
- **라운드 종료**: "Round N 종료" 버튼 클릭 → 의견 입력 마감
- **실시간 동기화**: Supabase Realtime으로 모든 클라이언트 자동 동기화

#### 장점

- QR 코드 1개만 인쇄하면 됨
- 참가자는 한 번 접속 후 계속 사용
- 어드민이 전체 진행 통제 가능
- 라운드 시간 유연하게 조절 가능

### 보안 및 컨텐츠 관리: 42 Auth + 익명 표시

#### 기본 원칙

- **참가자 화면/TV 화면**: 완전 익명 표시 ("괄호파 👤")
- **DB 저장**: 42 intra_id 함께 저장 (추적 가능)
- **어드민 화면**: intra_id 확인 가능 + 실시간 메시지 숨김 기능

#### 보안 시스템 장점

1. **심리적 억제 효과**: 로그인 필수 → 부적절한 메시지 자제
2. **참가자 경험 보호**: 화면에는 완전 익명으로 자유롭게 참여
3. **책임 추적 가능**: 문제 발생 시 DB에서 작성자 확인
4. **실시간 관리**: 어드민이 부적절한 메시지 즉시 숨김

#### 다층 방어 전략

##### 1단계: 프론트엔드 사전 예방

- 글자 수 제한 (최대 50자)
- 연속 입력 방지 (같은 사용자 10초 간격)
- 빈 메시지 차단

##### 2단계: 백엔드 필터링

- 욕설/비속어 자동 필터 (bad-words 라이브러리) <- 생략
- 스팸 감지 (동일 내용 반복) <- 생략

##### 3단계: 어드민 실시간 관리 (핵심)

- 어드민 화면에서 모든 메시지의 intra_id 확인 가능
- 부적절한 메시지 즉시 숨김 버튼
- 숨겨진 메시지는 TV/참가자 화면에서 사라짐
- 사후에 문제 메시지 분석 및 조치 가능

### 운영 방식

- **총 6라운드** (라운드당 7분)
- 각 라운드마다 하나의 밸런스 게임 문제 진행
- 참가자는 모바일로 접속하여 진영 선택 + 의견 입력
- 대형 화면에 실시간 의견 대결 표시

### 타임라인 (밸런스 게임 배틀)

```
12:15-12:22  Round 1: 팥붕어빵 vs 슈크림붕어빵
12:22-12:29  Round 2: 버그를 찾았다!
12:29-12:36  Round 3: 평생 선택해야 한다면?
12:36-12:43  Round 4: 협업 스타일 선택!
12:43-12:50  Round 5: 개발 환경 선택!
12:50-12:57  Round 6: 코드 리뷰 받는다면?
```

## 🖥️ 화면 구성 (메신저 채팅방 UI)

### 기본 콘셉트

- 카카오톡/메신저 채팅방처럼 표현
- **내 진영 = 오른쪽 정렬** (노란색 말풍선, 내가 보낸 메시지)
- **상대 진영 = 왼쪽 정렬** (흰색 말풍선, 상대방이 보낸 메시지)
- 참가자는 자신이 선택한 진영의 의견을 오른쪽에서 보게 됨
- TV 화면에서는 양쪽 진영이 실시간 대화하는 듯한 연출

### 옵션 A: TV 전체 사용 (메신저 채팅방 스타일)

```
┌──────────────────────────────────────────────────────────┐
│  🎮 ROUND 2/6  ⏱️ 5:23      [QR] survey.42gs.com        │
│  21. 평생 선택해야 한다면?                               │
│  세미콜론파 😤 42명(35%)  vs  괄호파 💪 78명(65%)       │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  ┌──────────────────┐                                   │
│  │ 괄호 안 닫으면   │                                   │
│  │ 찾기 힘들어      │                                   │
│  └──────────────────┘                                   │
│  괄호파 👤                                               │
│                                                          │
│                      ┌───────────────────┐              │
│                      │ IDE가 알아서      │              │
│                      │ 잡아주잖아        │              │
│                      └───────────────────┘              │
│                                세미콜론파 👤              │
│                                                          │
│  ┌──────────────────┐                                   │
│  │ Python도         │                                   │
│  │ 괄호 중요함      │                                   │
│  └──────────────────┘                                   │
│  괄호파 👤                                               │
│                                                          │
│                      ┌───────────────────┐              │
│                      │ C 할 땐           │              │
│                      │ 세미콜론이 생명   │              │
│                      └───────────────────┘              │
│                                세미콜론파 👤              │
│                                                          │
│  ┌──────────────────┐                                   │
│  │ LSP 만세         │                                   │
│  └──────────────────┘                                   │
│  괄호파 👤                                               │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### 옵션 B: TV 절반 사용 (채팅방 세로형)

```
┌─────────────────────────────┐
│ 🎮 R2/6 ⏱️ 5:23  [QR코드]  │
│ 평생 선택해야 한다면?       │
│ 세미콜론파 42(35%) vs       │
│ 괄호파 78(65%)              │
├─────────────────────────────┤
│                             │
│ ┌─────────────┐             │
│ │괄호 안 닫으면│             │
│ │찾기 힘들어   │             │
│ └─────────────┘             │
│ 괄호파                      │
│                             │
│          ┌──────────┐       │
│          │IDE가     │       │
│          │알아서    │       │
│          └──────────┘       │
│              세미콜론파     │
│                             │
│ ┌─────────────┐             │
│ │Python도     │             │
│ │괄호 중요함   │             │
│ └─────────────┘             │
│ 괄호파                      │
│                             │
│          ┌──────────┐       │
│          │C 할 땐   │       │
│          │세미콜론이│       │
│          └──────────┘       │
│              세미콜론파     │
│                             │
└─────────────────────────────┘
```

### 옵션 C: 최소 버전 (간소화된 채팅 UI)

```
┌────────────────────┐
│ R2/6 ⏱️5:23  [QR] │
│ 세미콜론 vs 괄호   │
│ 42(35%) vs 78(65%) │
├────────────────────┤
│ ┌──────┐           │
│ │괄호  │           │
│ │중요  │           │
│ └──────┘           │
│                    │
│      ┌──────┐      │
│      │IDE가 │      │
│      │잡아줌│      │
│      └──────┘      │
└────────────────────┘
```

**추천 방식:**

- **옵션 A**: TV 전체 사용 가능 시 (가장 몰입감 있는 채팅방 경험)
- **옵션 B**: TV 절반 사용 시 (채팅 UI 유지하며 공간 절약)
- **옵션 C**: 최소 공간일 때 (채팅 말풍선만 간소화 표현)

**참가자별 화면 차이:**

- 세미콜론파를 선택한 참가자: 세미콜론 의견이 오른쪽(노란색)에 표시됨
- 괄호파를 선택한 참가자: 괄호 의견이 오른쪽(노란색)에 표시됨
- TV 관리자 화면: 양쪽 진영 모두 중립적으로 표시

## 📱 참가자 모바일 화면

### 기본 콘셉트

- **채팅방 스타일**: 카카오톡처럼 내 진영은 오른쪽, 상대 진영은 왼쪽
- **실시간 피드**: 새 의견이 올라오면 채팅 메시지처럼 추가
- **인터랙티브**: 진영 선택 → 실시간 채팅 참여 → TV 화면 반영

### 1. 로그인 화면

```
┌───────────────────────┐
│  🎄 42 경산           │
│  밸런스 게임 배틀     │
│                       │
│  [42 로그인하기 🚀]   │
│                       │
│  * 42 인증 필수       │
└───────────────────────┘
```

### 2. 라운드 대기 화면

```
┌───────────────────────┐
│ 🎮 Round 2/6          │
│ ⏱️ 곧 시작됩니다...   │
│                       │
│ 평생 선택해야 한다면? │
│                       │
│  세미콜론 😤  vs      │
│  괄호 💪              │
│                       │
│ 사전 설문 결과:       │
│ 42명(35%) vs 78명(65%)│
│                       │
│ 대기 중...            │
└───────────────────────┘
```

### 3. 진영 선택 화면

```
┌───────────────────────┐
│ 🎮 Round 2/6 ⏱️ 6:42  │
│ 평생 선택해야 한다면? │
├───────────────────────┤
│                       │
│  당신의 선택은?       │
│                       │
│  ┌─────────────────┐ │
│  │  세미콜론파 😤  │ │
│  │  42명 (35%)     │ │
│  └─────────────────┘ │
│                       │
│  ┌─────────────────┐ │
│  │  괄호파 💪      │ │
│  │  78명 (65%)     │ │
│  └─────────────────┘ │
│                       │
└───────────────────────┘
```

### 4. 진영 선택 후 - 채팅방 스타일 화면 (핵심!)

**세미콜론파를 선택한 경우:**

```
┌───────────────────────────────┐
│ 🎮 R2/6 ⏱️ 5:23               │
│ 세미콜론 😤 vs 괄호 💪        │
│ 42명(35%) vs 78명(65%)        │
├───────────────────────────────┤
│ [채팅 영역 - 실시간 스크롤]  │
│                               │
│ ┌───────────┐                 │
│ │괄호 안닫으면│                 │
│ │찾기 힘들어  │                 │
│ └───────────┘                 │
│ 괄호파 👤                     │
│                               │
│              ┌──────────┐     │
│              │IDE가     │     │
│              │알아서    │     │
│              └──────────┘     │
│                   세미콜론파 나│
│                               │
│ ┌───────────┐                 │
│ │Python도   │                 │
│ │괄호 중요함 │                 │
│ └───────────┘                 │
│ 괄호파 👤                     │
│                               │
│              ┌──────────┐     │
│              │C 할 땐   │     │
│              │세미콜론이│     │
│              └──────────┘     │
│                   세미콜론파 나│
│                               │
├───────────────────────────────┤
│ 한마디 남기기 (50자 이내):   │
│ ┌───────────────────────────┐│
│ │IDE가 알아서 잡아주잖아    ││
│ └───────────────────────────┘│
│                 [전송 📤]     │
└───────────────────────────────┘
```

**괄호파를 선택한 경우:**

```
┌───────────────────────────────┐
│ 🎮 R2/6 ⏱️ 5:23               │
│ 세미콜론 😤 vs 괄호 💪        │
│ 42명(35%) vs 78명(65%)        │
├───────────────────────────────┤
│ [채팅 영역 - 실시간 스크롤]  │
│                               │
│              ┌──────────┐     │
│              │IDE가     │     │
│              │알아서    │     │
│              └──────────┘     │
│                   세미콜론파 👤│
│                               │
│ ┌───────────┐                 │
│ │괄호 안닫으면│                 │
│ │찾기 힘들어  │                 │
│ └───────────┘                 │
│ 괄호파 나                     │
│                               │
│              ┌──────────┐     │
│              │C 할 땐   │     │
│              │세미콜론이│     │
│              └──────────┘     │
│                   세미콜론파 👤│
│                               │
│ ┌───────────┐                 │
│ │Python도   │                 │
│ │괄호 중요함 │                 │
│ └───────────┘                 │
│ 괄호파 나                     │
│                               │
├───────────────────────────────┤
│ 한마디 남기기 (50자 이내):   │
│ ┌───────────────────────────┐│
│ │괄호 안 닫으면 찾기 힘들어 ││
│ └───────────────────────────┘│
│                 [전송 📤]     │
└───────────────────────────────┘
```

### 5. 메시지 전송 후

```
┌───────────────────────────────┐
│              ┌──────────┐     │
│              │C 할 땐   │     │
│              │세미콜론이│     │
│              └──────────┘     │
│                   세미콜론파 👤│
│                               │
│ ┌───────────┐                 │
│ │Python도   │                 │
│ │괄호 중요함 │                 │
│ └───────────┘                 │
│ 괄호파 나                     │
│                               │
│              ┌──────────┐     │
│              │그게      │ ✅  │
│              │맞지!     │     │
│              └──────────┘     │
│                   세미콜론파 나│
│                               │
├───────────────────────────────┤
│ ✅ 전송 완료!                 │
│ [다른 의견 보내기]            │
└───────────────────────────────┘
```

### 화면 특징

1. **내 진영 = 오른쪽 노란색 말풍선** + "나" 표시
2. **상대 진영 = 왼쪽 흰색 말풍선** + "👤" 표시
3. **실시간 자동 스크롤**: 새 메시지가 올라오면 가장 아래로
4. **전송 완료 피드백**: 체크 마크 + "전송 완료" 메시지
5. **10초 쿨타임**: 연속 입력 방지 (프론트엔드 타이머)

## 🗄️ 데이터베이스 구조

### surveys 테이블 (사전 설문용)

```sql
CREATE TABLE surveys (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  created_at TIMESTAMP DEFAULT NOW(),
  intra_id TEXT NOT NULL UNIQUE, -- 42 인트라 ID
  circle TEXT NOT NULL, -- 서클
  dev_field TEXT, -- 희망 개발 분야
  preferred_language TEXT, -- 선호 언어
  editor TEXT, -- 에디터
  active_time TEXT, -- 활동 시간대
  cluster_hours TEXT, -- 클러스터 시간
  study_location TEXT, -- 학습 위치
  non_cluster_activities TEXT[], -- 다른 공간 활동 (복수)
  work_style TEXT, -- 과제 방식
  planning_style TEXT, -- 계획형 vs 즉흥형
  learning_method TEXT, -- 학습 방법
  mbti TEXT, -- MBTI
  mbti_reliability INT, -- MBTI 신뢰도
  coding_environment TEXT, -- 코딩 환경
  favorite_snacks TEXT[], -- 선호 간식 (복수)
  debugging_method TEXT, -- 디버깅 방법
  hardest_project TEXT, -- 힘들었던 과제
  dev_goal_2026 TEXT, -- 2026 목표

  -- 밸런스 게임 (선택지만)
  balance_game_1 TEXT, -- A or B (붕어빵)
  balance_game_2 TEXT, -- A or B (버그)
  balance_game_3 TEXT, -- A or B (세미콜론 vs 괄호)
  balance_game_4 TEXT, -- A or B (협업)
  balance_game_5 TEXT, -- A or B (개발 환경)
  balance_game_6 TEXT  -- A or B (코드 리뷰)
);
```

### balance_game_rounds 테이블

```sql
CREATE TABLE balance_game_rounds (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  round_number INT NOT NULL,
  question_text TEXT NOT NULL,
  option_a TEXT NOT NULL,
  option_b TEXT NOT NULL,
  is_active BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### balance_game_comments 테이블 (당일 의견용)

```sql
CREATE TABLE balance_game_comments (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  round_id UUID REFERENCES balance_game_rounds(id),
  intra_id TEXT NOT NULL, -- 42 인트라 ID (작성자 추적용)
  side TEXT NOT NULL, -- 'A' or 'B'
  comment TEXT NOT NULL, -- 현장에서 입력한 의견 (최대 50자)
  is_hidden BOOLEAN DEFAULT FALSE, -- 어드민이 숨긴 메시지
  created_at TIMESTAMP DEFAULT NOW()
);

-- 인덱스 추가
CREATE INDEX idx_comments_round_visible ON balance_game_comments(round_id, is_hidden);
CREATE INDEX idx_comments_intra_id ON balance_game_comments(intra_id);
```

**주요 차이점:**

- `surveys` 테이블: 사전 설문에서 선택지만 저장 (의견 없음)
- `balance_game_comments` 테이블: 당일 현장에서 입력한 의견만 저장
- 사전 설문 비율을 표시하면서, 현장 의견으로 대결하는 구조

**보안 필드:**

- `intra_id`: 42 인증으로 받은 사용자 ID (작성자 추적, TV/참가자 화면에는 미표시)
- `is_hidden`: 어드민이 부적절한 메시지를 숨긴 경우 true (숨긴 메시지는 화면에 표시 안 됨)

## 🎯 밸런스 게임 문제 목록

### Round 1: 붕어빵 대결!

- A: 팥붕어빵
- B: 슈크림붕어빵

### Round 2: 버그를 찾았다! 당신의 선택은?

- A: 1시간 안에 찾을 수 있지만 해결에 10시간 걸리는 버그
- B: 10시간 걸려 찾지만 1시간 안에 해결되는 버그

### Round 3: 평생 선택해야 한다면?

- A: 세미콜론 빼먹는 실수를 평생 반복
- B: 괄호 짝 안 맞는 실수를 평생 반복

### Round 4: 협업 스타일 선택!

- A: 코드는 완벽한데 커뮤니케이션 0인 팀원
- B: 커뮤니케이션은 완벽한데 코드 실력이 부족한 팀원

### Round 5: 개발 환경 선택! (지원금 고려 X)

- A: 성능 좋은 데스크탑 + 클러스터 필수 출석
- B: 성능 부족한 노트북 + 완전 재택 가능

### Round 6: 코드 리뷰 받는다면?

- A: "LGTM(Looks Good To Me)" 만 달아주는 리뷰어
- B: 코드 한 줄 한 줄 지적하며 다시 짜라는 리뷰어

## 🛠️ 기술 구현

### Frontend

- **Framework**: React + JavaScript (Vite)
- **Realtime**: Supabase Realtime Subscriptions
- **Animation**: Framer Motion (의견 카드 애니메이션)
- **Styling**: Tailwind CSS

### 주요 기능

#### 1. 42 Auth 인증 (참가자 로그인)

```javascript
// 42 OAuth 로그인
const login42 = async () => {
	const { data, error } = await supabase.auth.signInWithOAuth({
		provider: 'oauth',
		options: {
			redirectTo: `${window.location.origin}/balance-game`,
		},
	});
};

// 로그인된 사용자 정보 가져오기
const getCurrentUser = async () => {
	const {
		data: { user },
	} = await supabase.auth.getUser();
	return user?.user_metadata?.intra_id; // 42 intra_id
};
```

#### 2. 관리자 페이지 (어드민 제어)

```javascript
// 라운드 시작/종료 제어
const startRound = async (roundNumber) => {
	// 1. 모든 라운드 비활성화
	await supabase
		.from('balance_game_rounds')
		.update({ is_active: false })
		.neq('id', '00000000-0000-0000-0000-000000000000');

	// 2. 해당 라운드만 활성화
	await supabase
		.from('balance_game_rounds')
		.update({ is_active: true })
		.eq('round_number', roundNumber);

	// 3. 모든 참가자 화면이 자동으로 이 라운드로 전환됨 (Realtime 구독)
};

const endRound = async () => {
	// 현재 활성 라운드 비활성화
	await supabase
		.from('balance_game_rounds')
		.update({ is_active: false })
		.eq('is_active', true);

	// 결과 집계 로직
};

// 메시지 숨김 기능
const hideComment = async (commentId) => {
	await supabase
		.from('balance_game_comments')
		.update({ is_hidden: true })
		.eq('id', commentId);

	// Realtime으로 모든 화면에서 즉시 사라짐
};

// 어드민 화면: 메시지 목록 (intra_id 포함)
const fetchCommentsForAdmin = async (roundId) => {
	const { data } = await supabase
		.from('balance_game_comments')
		.select('*')
		.eq('round_id', roundId)
		.order('created_at', { ascending: false });

	return data; // intra_id, is_hidden 모두 포함
};
```

#### 3. 참가자 모바일 페이지 (자동 동기화)

```javascript
// 현재 활성화된 라운드 실시간 구독
useEffect(() => {
	const subscription = supabase
		.channel('active_round')
		.on(
			'postgres_changes',
			{ event: 'UPDATE', schema: 'public', table: 'balance_game_rounds' },
			(payload) => {
				// 어드민이 라운드를 시작하면 자동으로 화면 전환
				if (payload.new.is_active) {
					setCurrentRound(payload.new);
				}
			}
		)
		.subscribe();

	return () => subscription.unsubscribe();
}, []);

// 의견 제출 (42 Auth 필수)
const submitComment = async (side, comment) => {
	// 입력 검증
	if (!comment || comment.length > 50) {
		alert('의견은 1-50자 이내로 입력해주세요');
		return;
	}

	// 현재 로그인된 사용자 ID 가져오기
	const intraId = await getCurrentUser();
	if (!intraId) {
		alert('로그인이 필요합니다');
		return;
	}

	// DB에 저장 (intra_id 포함, 화면에는 미표시)
	await supabase.from('balance_game_comments').insert({
		round_id: currentRound.id,
		intra_id: intraId,
		side: side,
		comment: comment,
	});

	// 투표도 함께 기록
	await supabase
		.from('balance_game_votes')
		.insert({ round_id: currentRound.id, side: side });
};
```

#### 4. 메인 디스플레이 (대형 화면 - 채팅방 UI)

```javascript
// Supabase Realtime으로 새 의견 및 숨김 처리 구독
useEffect(() => {
	const subscription = supabase
		.channel('balance_comments')
		.on(
			'postgres_changes',
			{
				event: '*',
				schema: 'public',
				table: 'balance_game_comments',
			},
			(payload) => {
				if (payload.eventType === 'INSERT') {
					// 새 의견이 들어오면 메신저 말풍선 애니메이션과 함께 표시
					animateNewComment(payload.new);
				} else if (payload.eventType === 'UPDATE' && payload.new.is_hidden) {
					// 어드민이 메시지를 숨기면 화면에서 제거
					removeComment(payload.new.id);
				}
			}
		)
		.subscribe();

	return () => subscription.unsubscribe();
}, []);

// TV/참가자 화면용: is_hidden=false인 메시지만 가져오기
const fetchVisibleComments = async (roundId) => {
	const { data } = await supabase
		.from('balance_game_comments')
		.select('id, side, comment, created_at') // intra_id 제외
		.eq('round_id', roundId)
		.eq('is_hidden', false)
		.order('created_at', { ascending: true });

	return data;
};

// 메신저 스타일 말풍선 애니메이션
const animateNewComment = (comment) => {
	// 숨겨진 메시지는 표시하지 않음
	if (comment.is_hidden) return;

	// 해당 진영(좌/우)에 말풍선 슬라이드 인 애니메이션
	const direction = comment.side === userSelectedSide ? 'right' : 'left';
	// Framer Motion으로 슬라이드 효과
};
```

## 🎨 UI/UX 특징

### 1. 실시간 애니메이션

- 새 의견이 들어오면 **해당 진영 쪽에서 슬라이드 인**
- 오래된 의견은 서서히 fade out
- 투표 수가 증가하면 바 차트 애니메이션

### 2. 진영 색상 구분

```css
/* A진영: 빨강 계열 */
.side-a {
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* B진영: 파랑 계열 */
.side-b {
	background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}
```

### 3. 크리스마스 테마

- 눈 내리는 효과 (배경)
- 크리스마스 컬러 (빨강/초록/금색)
- 산타모자 아이콘, 선물 이모지 활용

## 📊 이벤트 후 결과 활용

### 1. 통계 대시보드

- 각 라운드별 투표 결과
- 가장 치열했던 라운드 (득표율 차이 5% 이내)
- 가장 재미있었던 의견 BEST 3 (추천 기능 추가 시)

### 2. SNS 공유용 카드

```
┌─────────────────────────┐
│  42 경산 밸런스 게임    │
│                         │
│  나는 [세미콜론파]      │
│  전체 35%가 선택!       │
│                         │
│  #42경산 #밸런스게임    │
└─────────────────────────┘
```

## ✅ 체크리스트

### 이벤트 전

- [ ] Supabase 프로젝트 생성 및 테이블 구축
- [ ] 6개 라운드 데이터 DB에 사전 입력
- [ ] 관리자 페이지 테스트
- [ ] 메인 디스플레이 화면 테스트
- [ ] 모바일 반응형 확인
- [ ] 실시간 동기화 테스트
- [ ] QR 코드 생성 및 출력
- [ ] TV 화면 연결 및 레이아웃 확인

### 이벤트 당일

- [ ] WiFi 연결 확인
- [ ] 관리자 로그인
- [ ] 메인 디스플레이 전체화면 설정
- [ ] QR 코드 부착
- [ ] 타이머 동작 확인
- [ ] MC 진행 대본 준비

### 이벤트 후

- [ ] 결과 데이터 백업
- [ ] 통계 대시보드 생성
- [ ] SNS 공유용 이미지 생성
- [ ] 참여자 피드백 수집

## 🚀 구현 우선순위 및 개발 기간

### Phase 1: MVP (필수) - 약 1.5-2일

#### Day 1 (4-6시간)

1. Supabase 프로젝트 생성 및 DB 스키마 구축
   - surveys, balance_game_rounds, balance_game_comments 테이블
   - 인덱스 설정
   - **intra_id 대신 임시로 nickname 필드 사용**
2. React + Vite 프로젝트 세팅
   - Tailwind CSS 설정
   - **간단한 닉네임 입력 로그인 (42 Auth는 나중에)**

#### Day 2 (4-6시간)

1. 관리자 페이지 구현
   - 라운드 시작/종료 제어
   - 메시지 숨김 기능
2. 메인 디스플레이 (채팅방 UI)
   - Supabase Realtime 구독
   - 기본 말풍선 레이아웃 (좌우 구분)

#### Day 3 (3-4시간)

1. 모바일 참여 페이지
   - 닉네임 입력 로그인
   - 진영 선택
   - 의견 입력 및 전송
2. 배포 (Vercel)
3. 기본 테스트 및 버그 수정

**→ 여기까지면 이벤트 진행 가능! (1.5-2일)**

### Phase 2: 보안 강화 (추천) - 추가 0.5-1일

1. **42 OAuth 연동** ⭐ (닉네임 → intra_id 교체)
   - Supabase Auth 설정
   - 로그인 플로우 변경
   - DB 필드 업데이트 (nickname → intra_id)
2. 욕설 필터링 (bad-words 라이브러리)
3. 연속 입력 방지 (10초 쿨타임)

### Phase 3: UI/UX 개선 (추천) - 추가 1-2일

1. 투표 수 실시간 카운트 및 바 차트
2. Framer Motion으로 말풍선 슬라이드 인 애니메이션
3. 타이머 기능 (라운드 종료 알림)
4. 크리스마스 테마 스타일링 (눈 내리는 효과)

### Phase 4: 추가 기능 (선택) - 필요시 추가 1일

1. 의견 추천(좋아요) 기능
2. 실시간 통계 차트
3. 결과 통계 대시보드
4. SNS 공유 카드 생성 기능

**총 예상 개발 기간:**

- **MVP (닉네임 로그인)**: 1.5-2일 ⭐ 빠른 프로토타입
- **MVP + 42 OAuth**: 2-3일 (이벤트 진행 가능)
- **완성도 높은 버전**: 4-5일 (권장)

## 💡 운영 팁

1. **첫 라운드는 가벼운 주제로**: 참가자들이 익숙해지도록
2. **MC의 역할이 중요**: 의견을 읽어주며 분위기 띄우기
3. **시간 조절 유연하게**: 의견이 적으면 짧게, 많으면 길게
4. **베스트 의견 시상**: 가장 재미있는 의견에 작은 상품
5. **사전 테스트 필수**: 현장에서 문제 생기면 수습 어려움

## 📝 참고사항

- 동시 접속자 예상: 50-100명
- Supabase 무료 티어로도 충분히 가능
- 모바일 데이터로 접속 시 네트워크 부하 고려
- 이벤트 시간: 약 42분 (6라운드 기준)

---

## 🎤 회의 발표용 요약

### 이벤트 개요

- **목적**: 42 경산 크리스마스 이벤트 - 메신저 채팅방 스타일의 실시간 밸런스 게임 배틀
- **방식**:
  - Part 1: 사전 설문 결과 발표 (15분)
  - Part 2: 밸런스 게임 배틀 - 모바일로 의견 입력 → TV 화면에 채팅방처럼 실시간 표시 (42분)
- **소요 시간**: 총 57분
- **참가 방법**: QR 코드 스캔 → 42 로그인 → 채팅방 UI로 참여

### 핵심 포인트

1. **채팅방 UI**: 카카오톡처럼 내 진영은 오른쪽, 상대 진영은 왼쪽 말풍선
2. **실시간 인터랙션**: 입력한 의견이 즉시 대형 화면에 말풍선으로 표시
3. **익명 + 안전**: 화면엔 익명, DB엔 intra_id 저장으로 부적절한 메시지 추적
4. **어드민 제어**: 관리자가 라운드 시작/종료 및 부적절 메시지 실시간 숨김

### 기술 스택

- **Frontend**: React + JavaScript (Vite)
- **Backend/DB**: Supabase (실시간 기능 내장, 무료)
- **Auth**: 42 OAuth
- **Animation**: Framer Motion
- **Styling**: Tailwind CSS
- **Deploy**: Vercel (자동 배포)

### 필요한 준비물

- TV 1대 (또는 TV 절반 공간)
- WiFi 연결 (안정적인 네트워크 필수)
- QR 코드 출력물
- 관리자용 노트북 1대

### 밸런스 게임 문항 (6개)

1. 팥붕어빵 vs 슈크림붕어빵 (워밍업)
2. 버그 찾기 1시간/해결 10시간 vs 찾기 10시간/해결 1시간
3. 세미콜론 실수 평생 vs 괄호 실수 평생
4. 완벽한 코드/소통0 팀원 vs 부족한 코드/완벽한 소통 팀원
5. 고성능 데스크탑/출석필수 vs 저성능 노트북/재택가능
6. LGTM만 달아주는 리뷰어 vs 한 줄 한 줄 지적하는 리뷰어

### 개발 난이도 및 기간

- **난이도**: ⭐⭐☆☆☆ (중하) - React 초보도 충분히 가능
- **개발 기간**:
  - MVP: 2-3일 (이벤트 진행 가능)
  - 완성도 높은 버전: 4-5일 (권장)

### 보안 시스템

1. **42 인증 필수**: 로그인해야만 참여 가능
2. **심리적 억제**: intra_id 저장으로 추적 가능함을 인지
3. **실시간 관리**: 어드민이 부적절 메시지 즉시 숨김
4. **다층 방어**: 프론트엔드 검증 + 백엔드 필터링 + 어드민 관리
